import{S as a,M as m}from"./score-counter.ca95ef47.js";import{C as l}from"./custom-button.78cac274.js";import{a as c}from"./index.8e986272.js";import{m as d,n as f}from"./index.77cec027.js";var i,p=new Uint8Array(16);function h(){if(!i&&(i=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(p)}const g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function y(e){return typeof e=="string"&&g.test(e)}var s=[];for(var r=0;r<256;++r)s.push((r+256).toString(16).substr(1));function b(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!y(n))throw TypeError("Stringified UUID is invalid");return n}function x(e,t,n){e=e||{};var o=e.random||(e.rng||h)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){n=n||0;for(var u=0;u<16;++u)t[n+u]=o[u];return t}return b(o)}const _={name:"trivia-wrapper",components:{ScoreCounter:a,CustomButton:l,MultiChoice:m},computed:{...d({getDifficulty:"getDifficulty"}),getStoreModuleName(){return`${this.$store.state.difficulty.toLowerCase()}TriviaModuleState/`}},props:{difficulty:{default:"Easy"}},data(){return{currentQuestionNumber:0,questions:[],time:null,questionAmount:10}},methods:{seeResults(){this.$router.push("results")},previousQuestion(){this.$store.dispatch(`${this.getStoreModuleName}SET_CURRENT_QUESTION_NUMBER`,--this.currentQuestionNumber)},nextQuestion(){this.$store.dispatch(`${this.getStoreModuleName}SET_CURRENT_QUESTION_NUMBER`,++this.currentQuestionNumber)},async getQuestions(e){let t=(await c.get("https://opentdb.com/api.php",{params:{amount:e,type:"multiple",difficulty:this.$store.state.difficulty.toLowerCase(),token:this.$store.state.sessionToken}})).data;await this.addUids(t.results)},async addUids(e){for(let t=0;t<e.length;t++)e[t].uid=x();this.questions=e,await this.$store.dispatch(`${this.getStoreModuleName}SET_NEW_QUESTIONS`,e)}},async mounted(){this.$nextTick(async()=>{let e=this.$store.getters[`${this.getStoreModuleName}getQuestions`];if(e!=null){this.questions=e,this.currentQuestionNumber=this.$store.getters[`${this.getStoreModuleName}getCurrentQuestionNumber`]||0,this.time=this.$store.getters[`${this.getStoreModuleName}getTime`];return}await this.getQuestions(this.questionAmount)})}};var v=function(){var t=this,n=t._self._c;return t.questions?n("div",{staticClass:"max-w-8xl mx-auto px-4 sm:px-6 md:px-8 pt-2 sm:pt-6 max-w-7xl"},[n("div",{staticClass:"w-full flex justify-center p-4 mb-4 bg-gray-100 rounded"},[n("span",[t._v(t._s(t.getDifficulty))])]),n("score-counter",{attrs:{"question-amount":t.questionAmount,"current-question-number":t.currentQuestionNumber},scopedSlots:t._u([{key:"middleTitleArea",fn:function(){return[t.currentQuestionNumber<=t.questionAmount-1&&t.currentQuestionNumber<=t.questionAmount-1?[t.questions[t.currentQuestionNumber]?[t._v(" "+t._s(t.questions[t.currentQuestionNumber].category)+" ")]:t._e()]:[t._v(" Done ")]]},proxy:!0}],null,!1,471692545)}),n("multi-choice",{attrs:{question:t.questions[t.currentQuestionNumber]},scopedSlots:t._u([{key:"controls",fn:function({slotScope:o}){return[n("div",{staticClass:"flex flex-col sm:flex-row sm:space-x-4 mb-6"},[n("custom-button",{attrs:{"custom-class":"mb-4",disabled:t.currentQuestionNumber===0,text:"Back"},on:{click:t.previousQuestion}}),t.currentQuestionNumber<=t.questionAmount-2?n("custom-button",{attrs:{"custom-class":"mb-4",disabled:o.chosenIndex==null,text:"Confirm"},on:{click:t.nextQuestion}}):n("custom-button",{attrs:{"custom-class":"mb-4",text:"See Results",disabled:o.chosenIndex==null},on:{click:t.seeResults}})],1)]}}],null,!1,109431986)})],1):t._e()},N=[],Q=f(_,v,N,!1,null,null,null,null);const R=Q.exports;export{R as T};
